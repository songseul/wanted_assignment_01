# í”„ë¦¬ì˜¨ë³´ë”© 9íŒ€

| <img src="https://avatars.githubusercontent.com/u/58911113?v=4" width="120" height="120" /> | <img src="https://avatars.githubusercontent.com/u/74575497?v=4" width="120" height="120" /> | <img src="https://avatars.githubusercontent.com/u/72599761?v=4" width="120" height="120"/> |
| :-----------------------------------------------------------------------------------------: | :-----------------------------------------------------------------------------------------: | :----------------------------------------------------------------------------------------: |
|                                           ğŸ‘‘ ê¶Œì¤€                                           |                                           ê¹€ê²½í›ˆ                                            |                                           ê¹€ìˆ˜ì •                                           |
|                            [@jun-05](https://github.com/jun-05)                             |                          [@tirhande](https://github.com/tirhande)                           |                        [@crystal993](https://github.com/crystal993)                        |

| <img src="https://avatars.githubusercontent.com/u/104307213?v=4" width="120" height="120"/> | <img src="https://avatars.githubusercontent.com/u/94212747?v=4" width="120" height="120" /> | <img src="https://avatars.githubusercontent.com/u/77476348?v=4"  width="120" height="120" /> | <img src="https://avatars.githubusercontent.com/u/76990149?v=4" width="120" height="120"/> |
| :-----------------------------------------------------------------------------------------: | :-----------------------------------------------------------------------------------------: | :------------------------------------------------------------------------------------------: | :----------------------------------------------------------------------------------------: |
|                                           ì†¡ìŠ¬ê¸°                                            |                                           ì˜¤ë‚˜ë˜                                            |                                            ì´ì°½í›ˆ                                            |                                           ì „ì´ì§„                                           |
|                          [@songseul](https://github.com/songseul)                           |                            [@NR0617](https://github.com/NR0617)                             |                 [@anotheranotherhoon](https://github.com/anotheranotherhoon)                 |                          [@pongdang](https://github.com/pongdang)                          |

## ë°°í¬ë§í¬

[âœ¨ ë°°í¬ë§í¬](https://wanted-assignment-01.vercel.app)

## í”„ë¡œì íŠ¸ì˜ ì‹¤í–‰ ë°©ë²•

```
git clone git@github.com:Wanted-07-team-9/wanted_assignment_01.git

cd wanted-pre-onboarding-frontend

npm install

npm start

open http://localhost:3000
```

## commit msg ê·œì¹™

### 1. ì»¤ë°‹ ìœ í˜• ì§€ì •í•˜ê¸°

â­Â featÂ :Â ìƒˆë¡œìš´Â ê¸°ëŠ¥ì—Â ëŒ€í•œÂ ì»¤ë°‹

ğŸ› Â fixÂ :Â ë²„ê·¸Â ìˆ˜ì •ì—Â ëŒ€í•œÂ ì»¤ë°‹

ğŸ§±Â buildÂ :Â ë¹Œë“œÂ ê´€ë ¨Â íŒŒì¼Â ìˆ˜ì •ì—Â ëŒ€í•œÂ ì»¤ë°‹

ğŸ‘Â choreÂ :Â ê·¸Â ì™¸Â ìì˜í•œÂ ìˆ˜ì •ì—Â ëŒ€í•œÂ ì»¤ë°‹

âš’Â refactorÂ :Â Â ì½”ë“œÂ ë¦¬íŒ©í† ë§ì—Â ëŒ€í•œÂ ì»¤ë°‹

ğŸ¨Â styleÂ :Â ì½”ë“œÂ ìŠ¤íƒ€ì¼Â í˜¹ì€Â í¬ë§·Â ë“±ì—Â ê´€í•œÂ ì»¤ë°‹

âœÂ docsÂ :Â ë¬¸ì„œÂ ìˆ˜ì •ì—Â ëŒ€í•œÂ ì»¤ë°‹

ğŸ’¡ ciÂ :Â CIê´€ë ¨Â ì„¤ì •Â ìˆ˜ì •ì—Â ëŒ€í•œ ì»¤ë°‹

## Best Practice

[âœ¨ ì„ ì • ê¸°ì¤€](https://aeolian-mango-f23.notion.site/Assignment-18f08fd240c84e658b3e071ab2aeb1db)

[âœ¨ ì„ ì • ì´ìœ ](https://github.com/Wanted-07-team-9/wanted_assignment_01/pull/21)

## ì‘ì—…í•œ ë‚´ìš©

### 1. Context APIë¥¼ í™œìš©í•œ ë¼ìš°í„° ê°€ë“œ ì²˜ë¦¬ (with HoC)

**Context API**ë¡œ ìœ ì €ì˜ ë¡œê·¸ì¸ ìƒíƒœë¥¼ ì „ì—­ì—ì„œ ê´€ë¦¬í•  ìˆ˜ ìˆë„ë¡ í•˜ì˜€ê³  ìƒíƒœì— ë”°ë¼ ì ‘ê·¼í•  ìˆ˜ ìˆëŠ” ë¼ìš°í„°ë¥¼ ì²˜ë¦¬í–ˆìŠµë‹ˆë‹¤.

- [HoCë¡œ ì‘ì„±ëœ í•¨ìˆ˜](https://github.com/pongdang/wanted_assignment_01/blob/3439ba076a1ab87862290abdf939b71dde646db6/src/util/withAuthGuard.js#L1-L21)ì—ì„œ ì ‘ê·¼ ëŒ€ìƒì— ë”°ë¥¸ í˜ì´ì§€ì˜ íƒ€ì…(`member | guest`)ì„ ëª…ì‹œí•˜ì—¬ isLogin ìƒíƒœì™€ ë¹„êµí•©ë‹ˆë‹¤.
- ë¡œê·¸ì¸í•˜ì§€ ì•Šì€ ìƒíƒœ(`isLogin === false`)ì—ì„œ memberë“¤ë§Œ ì ‘ê·¼í•  ìˆ˜ ìˆëŠ” í˜ì´ì§€(`/todo`)ë¥¼ ì ‘ê·¼í•˜ë ¤ í•œë‹¤ë©´ ë¡œê·¸ì¸ í˜ì´ì§€(`/`) ë¡œ ë¦¬ë‹¤ì´ë ‰íŠ¸ ì‹œì¼œì¤ë‹ˆë‹¤.
- ë¡œê·¸ì¸í•œ ìƒíƒœ(`isLogin === true`)ì—ì„œ guestë“¤ë§Œ ì ‘ê·¼í•  ìˆ˜ ìˆëŠ” í˜ì´ì§€(`/`, `/signup`)ì„ ì ‘ê·¼í•˜ë ¤ í•œìë©´ íˆ¬ë‘ í˜ì´ì§€(`/todo`) ë¡œ ë¦¬ë‹¤ì´ë ‰íŠ¸ ì‹œì¼œì¤ë‹ˆë‹¤.

### 2. Suspense ë¥¼ ì´ìš©í•œ ì„ ì–¸ì ì¸ ë¹„ë™ê¸° í•¨ìˆ˜ ì²˜ë¦¬ì˜ ë¡œë”©ì²˜ë¦¬

**Suspense**ë¥¼ í™œìš©í•˜ë©´ ë¹„ë™ê¸° í•¨ìˆ˜ í˜¸ì¶œì˜ ìƒíƒœì— ë”°ë¼ UI ë¥¼ ì„ ì–¸ì ìœ¼ë¡œ ë³´ì—¬ì¤„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

- [Suspenseì˜ ì›ë¦¬](https://dev.to/charlesstover/react-suspense-with-the-fetch-api-374j)ì— ëŒ€í•´ ì°¾ì•„ë³´ê³ , ì´ë¥¼ ì°¸ê³ í•˜ì—¬ ë¼ì´ë¸ŒëŸ¬ë¦¬(react-query, Relay) ì—†ì´ ì‚¬ìš©í•  ìˆ˜ ìˆë„ë¡ í•„ìš”í•œ ë¶€ë¶„ë§Œ useFetchë¡œ ì¬êµ¬í˜„í•˜ì˜€ìŠµë‹ˆë‹¤.
- ë¡œë”© ì¤‘ì¼ ë•ŒëŠ” Promiseë¥¼ throw í•˜ì—¬ Suspense ì—ì„œ fallback ì—˜ë¦¬ë¨¼íŠ¸ë¥¼ ë Œë”ë§í•˜ë„ë¡ í•©ë‹ˆë‹¤.
- useFetch ì—ì„œ invalidate í•¨ìˆ˜ë¥¼ ì–»ì–´ì„œ íŠ¹ì • ì¿¼ë¦¬(fetchTodoList)ë¥¼ ë‹¤ì‹œ refetch í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

### 3. ErrorBoundary ë¥¼ ì´ìš©í•œ ì„ ì–¸ì ì¸ ì—ëŸ¬ ì²˜ë¦¬ (event ì—ëŸ¬ë¥¼ ì¡ê¸°ìœ„í•œ EventErrorHandler êµ¬í˜„)

**ErrorBoundary**ëŠ” errorê°€ ë°œìƒí–ˆì„ ë•Œ ì–´ë–¤ UIë¥¼ ë³´ì—¬ì¤„ ê²ƒì¸ì§€ ì„¤ì •í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

- ê·¸ëŸ¬ë‚˜ ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬(onClick, onChange ë“±ë“±)ì—ì„œ ë°œìƒí•œ errorëŠ” ì¼ë°˜ì ìœ¼ë¡œ ErrorBoundaryì—ì„œ catch í•˜ì§€ ëª»í•©ë‹ˆë‹¤.
- ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ì—ì„œ ë°œìƒí•œ ì—ëŸ¬ë¥¼ ErrorBoundaryì—ì„œ catch í•˜ë„ë¡ ErrorBoundary í´ë˜ìŠ¤ ì»´í¬ë„ŒíŠ¸ë¥¼ ê°œì„ í•˜ì˜€ìŠµë‹ˆë‹¤.
- `unhandledrejection`/`error` ë¼ëŠ” ì´ë²¤íŠ¸ë¥¼ ì´ìš©í•´ ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ì—ì„œ ë°œìƒí•œ errorë¥¼ ì „íŒŒì‹œì¼œ ErrorBoundaryì—ì„œ `renderFallback` ì„ ì´ìš©í•´ UI ë¥¼ ë³´ì—¬ì¤„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

### 4. formì˜ ìœ íš¨ì„±ì„ ê²€ì‚¬ë¥¼ ìœ„í•œ `useFormField` hookì„ êµ¬í˜„

ì´ì „ì—ëŠ” ì´ë©”ì¼, ë¹„ë°€ë²ˆí˜¸ê³¼ ê°™ì€ ì—¬ëŸ¬ formì˜ ìœ íš¨ì„±ì„ ê²€ì‚¬í•  ë•Œ ìƒíƒœë¥¼ form ì˜ ê°œìˆ˜ë§Œí¼ ë§Œë“¤ê³  ê·¸ì— ë”°ë¥¸ change í•¨ìˆ˜ë„ ì‘ì„±í•´ì•¼ í–ˆìŠµë‹ˆë‹¤.

formì„ ê²€ì¦í•˜ëŠ” ì—­í• ì„ í•œ ê³³ì— ìœ„ì„í•˜ê³ ì `useFormField` hookì„ ë§Œë“¤ì—ˆìŠµë‹ˆë‹¤.

```js
const {
  value: password,
  onChange: onChangePassword,
  errorMessage: passwordErrorMessage,
} = useFormField({
  validators: [
    { ok: value => isEmptyValue(value), message: 'ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”' },
    {
      ok: value => isValidPassword(value),
      message: 'ë¹„ë°€ë²ˆí˜¸ëŠ” 8ì ì´ìƒì´ì–´ì•¼ í•©ë‹ˆë‹¤',
    },
  ],
});
```

`validators` ë°°ì—´ ì•ˆì— valueì˜ ìœ íš¨ì„±ì„ ê²€ì‚¬í•˜ëŠ” í•¨ìˆ˜ë¥¼ ë„£ì–´, ê·¸ í•¨ìˆ˜ì˜ ê²°ê³¼ì— ë”°ë¼ `errorMessage` ê°€ ë°˜í™˜ë˜ë„ë¡ í–ˆìŠµë‹ˆë‹¤.
ë˜ ìœ íš¨ì„± ê´€ë ¨ í•¨ìˆ˜ëŠ” `validation` íŒŒì¼ ì•ˆì— ì„ ì–¸í•˜ì—¬ import í•˜ì—¬ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

## Best Practice ì ìš© ì‚¬í•­

### 1. í´ë”êµ¬ì¡°

```
â””â”€Â src
Â Â Â â”œâ”€Â api
Â Â Â â”œâ”€Â components
Â Â Â â”œâ”€Â contexts
Â Â Â â”œâ”€Â hooks
Â Â Â â”œâ”€Â pages
Â Â Â â”œâ”€ util
Â Â Â â”œâ”€Â Router.jsx
Â Â Â â”œâ”€Â App.css
Â Â Â â”œâ”€Â App.js
Â Â Â â””â”€Â index.js
```

### 2. ë¡œê·¸ì¸/íšŒì›ê°€ì… ê²½ë¡œ êµ¬ë¶„

- ë¡œê·¸ì¸ : `/`
- íšŒì›ê°€ì… :`/signup`

### 3. ì´ë©”ì¼, ë¹„ë°€ë²ˆí˜¸ ìœ íš¨ì„± ê²€ì‚¬ ê¸°ëŠ¥

```js
// util/validation.js

export function isEmptyValue(value) {
  return value.trim() !== '';
}

export function isValidEmail(value) {
  return value.includes('@');
}

export function isValidPassword(value) {
  return value.length >= 8;
}
```

- ìœ íš¨ì„± ê´€ë ¨ í•¨ìˆ˜ëŠ” ë‹¤ë¥¸ íŒŒì¼ë¡œ ë¶„ë¦¬í•˜ì˜€ìŠµë‹ˆë‹¤.

### 4. ë¡œê·¸ì¸ API í˜¸ì¶œ ì„±ê³µì‹œ /todo ì´ë™

ErrorBoundary ë¡œ Errorë¥¼ ê´€ë¦¬í•˜ì—¬ ë”°ë¡œ status ì½”ë“œì— ë”°ë¼ ì´ë™ì‹œí‚¤ëŠ” ë¡œì§ì„ ì‘ì„±í•˜ì§€ ì•Šì•„ë„ ë©ë‹ˆë‹¤.

```js
await login(user);

navigate('/todo');
```

### 5. JWT í† í°ê°’ ë¡œì»¬ ìŠ¤í† ë¦¬ì§€ì— ì €ì¥

- context APIë¡œ ë¡œê·¸ì¸ ìƒíƒœì™€ accessTokenì„ ê´€ë¦¬í•©ë‹ˆë‹¤.
- tokenì„ get, set, remove í•˜ëŠ” í•¨ìˆ˜ë¥¼ ë§Œë“¤ì–´ì„œ ì‚¬ìš©í•©ë‹ˆë‹¤.

```js
// contexts/TokenContext.js

const tokenStorage = {
  get: () => {
    return localStorage.getItem('access_token') || '';
  },
  set: accessToken => {
    localStorage.setItem('access_token', accessToken);
  },
  remove: () => {
    localStorage.removeItem('access_token');
  },
};
```

### 6. ë¡œê·¸ì¸ ì—¬ë¶€ì— ë”°ë¥¸ ë¦¬ë‹¤ì´ë ‰íŠ¸ ì²˜ë¦¬

```js
// components/Redirect.jsx

import { Navigate } from 'react-router-dom';

export function Redirect({ to }) {
  return <Navigate replace to={to} />;
}
```

- Redirectë¥¼ ì‹œì¼œì£¼ëŠ” ì»´í¬ë„ŒíŠ¸ë¥¼ ë§Œë“¤ì—ˆìŠµë‹ˆë‹¤.

```js
// util/withAuthGuard.js

import { Redirect } from '../components/Redirect';
import { useTokenContext } from '../contexts/TokenContext';

export function withAuthGuard(type, Component) {
  // eslint-disable-next-line react-hooks/rules-of-hooks
  const { isLogin } = useTokenContext();

  // ë¡œê·¸ì¸ì„ í•˜ì§€ ì•Šì•˜ëŠ”ë° memberë§Œ ì ‘ê·¼í•  ìˆ˜ ìˆëŠ” í˜ì´ì§€ì— ì ‘ê·¼í•˜ë ¤ í–ˆì„ ë•Œ
  if (!isLogin && type === 'member') {
    // '/' í˜ì´ì§€ë¡œ ë¦¬ë‹¤ì´ë ‰íŠ¸
    return <Redirect to="/" />;
  }

  // ë¡œê·¸ì¸ì„ í–ˆëŠ”ë° guestë§Œ ì ‘ê·¼í•  ìˆ˜ ìˆëŠ” í˜ì´ì§€ì— ì ‘ê·¼í•˜ë ¤ í–ˆì„ ë•Œ
  if (isLogin && type === 'guest') {
    // '/todo' í˜ì´ì§€ë¡œ ë¦¬ë‹¤ì´ë ‰íŠ¸
    return <Redirect to="/todo" />;
  }

  return Component;
}
```

- ë¡œê·¸ì¸ ìƒíƒœì™€ í˜ì´ì§€ íƒ€ì…ì„ ë¹„êµí•˜ì—¬ ì˜¬ë°”ë¥´ì§€ ì•Šì€ urlë¡œ ì´ë™ì‹œ ë¦¬ë‹¤ì´ë ‰íŠ¸ ë˜ë„ë¡ í–ˆìŠµë‹ˆë‹¤.
- ìì„¸í•œ ë‚´ìš©ì€ ì‘ì—…í•œ ë‚´ìš©ì˜ `1. Context APIë¥¼ í™œìš©í•œ ë¼ìš°í„° ê°€ë“œ ì²˜ë¦¬ (with HoC)` ì—ì„œ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

### 7. íˆ¬ë‘ ë¦¬ìŠ¤íŠ¸ ëª©ë¡ (/todo ì ‘ì†ì‹œ)

- `useFetch` hookì„ ì‚¬ìš©í•˜ì—¬ ëª©ë¡ì„ ê°€ì ¸ì˜¤ë„ë¡ í–ˆìŠµë‹ˆë‹¤.
- ìì„¸í•˜ë‚˜ ë‚´ìš©ì€ ì‘ì—…í•œ ë‚´ìš©ì˜ `2. Suspense ë¥¼ ì´ìš©í•œ ì„ ì–¸ì ì¸ ë¹„ë™ê¸° í•¨ìˆ˜ ì²˜ë¦¬ì˜ ë¡œë”©ì²˜ë¦¬` ì—ì„œ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

### ê·¸ ì™¸ ê¸°ëŠ¥(ì˜µì…˜)

- ì—ëŸ¬ ë©”ì‹œì§€ë¥¼ ëª¨ë‹¬ì°½ìœ¼ë¡œ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
- ë¡œê·¸ì•„ì›ƒ ê¸°ëŠ¥
